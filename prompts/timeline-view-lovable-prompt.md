# 🎯 COMPLETE AI UI GENERATION PROMPT FOR TASKLY TIMELINE VIEW

> **Generated by:** Sally (UX Expert)
> **Date:** 2025-10-22
> **Target Tools:** Lovable.dev, Vercel V0, or similar AI frontend generation tools
> **Component:** Timeline View (Sprint Planning Interface)

---

## 🚀 PROMPT START

```
# PROJECT CONTEXT

You are building the Timeline View for "Taskly" - a horizontal sprint planning interface that enables engineering managers to visualize and balance team capacity across multiple sprints. This view transforms the traditional Kanban board into a time-based planning tool with visual capacity indicators.

## Tech Stack
- **Framework:** Next.js 14+ (App Router with TypeScript)
- **Styling:** Tailwind CSS v3+
- **Component Library:** shadcn/ui (built on Radix UI primitives)
- **Drag & Drop:** @dnd-kit/core (for sprint assignment)
- **Icons:** Lucide React (Heroicons alternative)

## Design Philosophy
- **Manager-focused UX:** Optimized for sprint planning and capacity balancing
- **Visual capacity signals:** Color-coded progress bars, at-a-glance health indicators
- **Horizontal timeline metaphor:** Past, present, future sprints arranged left-to-right
- **Planning mode optimization:** Wide backlog + compressed sprint columns for efficient card assignment

---

# HIGH-LEVEL GOAL

Create a fully interactive Timeline view with horizontal sprint columns (past → future), a backlog column, visual capacity indicators (story points/card counts with color coding), Planning Mode toggle that shows capacity statistics panel, drag-and-drop cards between sprints, multi-select bulk assignment, sprint health indicators, and zoom controls—all following the Taskly design system.

---

# DETAILED STEP-BY-STEP INSTRUCTIONS

## Phase 1: Type Definitions & Data Structures

1. Create or extend `types/timeline.ts` with Sprint and Timeline-specific interfaces:

```typescript
export type SprintStatus = 'active' | 'planned' | 'completed';

export interface Sprint {
  id: string;
  name: string; // e.g., "Sprint 23"
  startDate: string; // ISO date
  endDate: string;
  goal?: string; // Sprint goal description
  capacity: number; // Total story points capacity
  status: SprintStatus;
  position: number; // For ordering left-to-right
  cardIds: string[]; // Cards assigned to this sprint
}

export interface SprintStats {
  totalPoints: number; // Sum of story points from cards
  cardCount: number;
  utilizationPercent: number; // totalPoints / capacity * 100
  overloaded: boolean; // utilizationPercent > 100
  daysRemaining?: number; // Only for active sprint
}

export interface Timeline {
  sprints: Sprint[];
  backlogCardIds: string[]; // Unassigned cards
}
```

2. Create mock data in `lib/mock-timeline-data.ts`:
   - 1 completed sprint (Sprint 21)
   - 1 active sprint (Sprint 22) with green health (70% capacity)
   - 2 planned sprints (Sprint 23: yellow/80%, Sprint 24: empty)
   - Backlog with 15-20 unassigned cards

## Phase 2: Core Timeline Structure

3. Create `components/timeline/timeline-view.tsx` main container:
   - Top: Timeline header (same board header but with Timeline view selected)
   - Left sidebar (optional, toggleable): Planning Mode stats panel (280px width)
   - Center: Horizontal scrollable container with sprint columns
   - Columns arranged left-to-right: Backlog → Sprint 21 → Sprint 22 (Active) → Sprint 23 → Sprint 24

4. Create `components/timeline/timeline-header.tsx`:
   - Same structure as Kanban board header
   - View toggle shows "Timeline" selected
   - Add "Planning Mode" toggle switch (left side, after board name)
   - Add zoom controls (+/- buttons) on right side
   - Active sprint badge shows "Sprint 22 • 8 days left"

5. Implement horizontal scroll container:
   - Flexbox layout with `overflow-x-auto`
   - Each sprint column is 280px wide (narrower than Kanban for more columns visible)
   - 16px gaps between columns
   - Smooth scroll behavior
   - Show scroll indicators (fade gradients on edges when content overflows)

## Phase 3: Sprint Column Component

6. Create `components/timeline/sprint-column.tsx`:
   - Column header (fixed top):
     - Sprint name (editable inline)
     - Date range (e.g., "Oct 15 - Oct 29")
     - Days remaining badge (only for active sprint, pulsing green)
     - Capacity bar (horizontal progress bar)
     - Story points display: "32 / 40 pts" (used / total)
   - Card list area (scrollable vertically):
     - Cards rendered same as Kanban but narrower (280px vs 320px)
     - Same compact card component reused
   - Column footer:
     - Card count badge: "8 cards"
     - "+" Add card button

7. Implement capacity bar (critical component):
   - Horizontal progress bar showing story point utilization
   - Color coding:
     - Green: 0-80% capacity (healthy)
     - Yellow: 80-100% capacity (near limit)
     - Red: >100% capacity (overloaded)
   - Visual design:
     - Height: 8px
     - Background: neutral-200 (gray track)
     - Fill: Dynamic color based on utilization
     - Rounded corners
   - Show percentage on hover tooltip

8. Add sprint status indicators:
   - **Completed sprints:** Gray background, "Completed" badge, collapsed by default (click to expand)
   - **Active sprint:** Green accent border (2px top border), pulsing "Active" badge
   - **Planned sprints:** Default styling, no special badge
   - **Overloaded sprints:** Red warning icon + "Overloaded" badge in header

## Phase 4: Backlog Column (Special Column)

9. Create `components/timeline/backlog-column.tsx`:
   - Always leftmost position (sticky left when Planning Mode off)
   - Wider than sprint columns: 320px (more room for unassigned cards)
   - Header: "Backlog" title + total card count badge
   - No capacity bar (unplanned cards)
   - No date range
   - Cards can only be dragged OUT, not dropped IN (from sprints)
   - Search/filter input at top of backlog for quick card finding

10. In Planning Mode (toggle active):
    - Backlog expands to 360px width
    - Sprint columns compress to 240px (fit more sprints on screen)
    - Backlog becomes sticky (stays visible when scrolling right)

## Phase 5: Planning Mode Stats Panel

11. Create `components/timeline/planning-stats-panel.tsx` (left sidebar):
    - Only visible when Planning Mode toggle is ON
    - Fixed 280px width, full height
    - Sections:
      - **Sprint Overview:** List of all sprints with mini capacity bars
      - **Team Capacity:** List of team members with their workload (e.g., "Alice: 24/30 pts")
      - **Sprint Health:** Color-coded status indicators (Green: 3 sprints, Yellow: 1, Red: 0)
    - Each sprint row in overview is clickable (scrolls to that sprint column)

12. Sprint overview card (within panel):
    - Sprint name + date range
    - Mini capacity bar (80px wide)
    - Story points: "32/40 pts (80%)"
    - Card count badge
    - Health indicator dot (green/yellow/red)
    - Click: scroll timeline to that sprint

13. Team capacity section:
    - Avatar + name for each team member
    - Story points assigned across ALL sprints: "24/30 pts"
    - Progress bar (same color coding as sprint capacity)
    - Red indicator if >100% allocated
    - Click: filter timeline to show only that member's cards

## Phase 6: Drag-and-Drop Sprint Assignment

14. Set up @dnd-kit for sprint assignment:
    - Wrap timeline in `<DndContext>`
    - Each sprint column is a droppable zone (useDroppable)
    - Cards use same draggable logic as Kanban (useSortable)
    - Dragging updates both sprint assignment AND card metadata

15. Drag behavior (sprint-specific):
    - Drag from Backlog → Sprint: Assigns card to sprint
    - Drag between Sprints: Reassigns card
    - Drag from Sprint → Backlog: Unassigns card (removes sprint)
    - Show capacity preview on hover: "+5 pts" badge appears on sprint header
    - If drop would overload sprint: Show warning modal "Sprint 23 will be overloaded (45/40 pts). Assign anyway?"

16. Implement real-time capacity updates:
    - When card dropped: Immediately update sprint capacity bar (optimistic UI)
    - Animate bar fill change (300ms smooth transition)
    - Update stats panel numbers in real-time
    - If sprint becomes overloaded: Flash red warning (500ms pulse)

## Phase 7: Multi-Select Bulk Assignment

17. Add multi-select in Timeline view:
    - Shift+click cards (works same as Kanban)
    - Checkboxes appear on cards
    - Floating action bar appears at bottom

18. Bulk action bar (Timeline-specific):
    - Show "X cards selected" count
    - "Assign to Sprint" dropdown (list of all sprints)
    - "Add to Backlog" button (unassigns selected cards)
    - "Change Priority" dropdown
    - "Delete" button
    - Clear selection (X icon)

19. Bulk sprint assignment flow:
    - User selects 5 cards from backlog
    - Clicks "Assign to Sprint" → dropdown opens
    - Selects "Sprint 23"
    - System calculates total points: 25 pts
    - Shows confirmation: "Assign 5 cards (25 pts) to Sprint 23? Current: 20/40 pts → New: 45/40 pts (Overloaded)"
    - User confirms
    - Cards animate moving to Sprint 23 column (staggered animation, 50ms delay each)
    - Capacity bar animates to new value

## Phase 8: Filters & Search (Timeline Context)

20. Reuse board header filters but adapt for Timeline:
    - Search: Filters cards across all sprints + backlog
    - Assignee filter: Highlights cards assigned to selected users
    - Priority filter: Works same as Kanban
    - Add sprint filter: Dropdown to show only specific sprint(s)

21. Sprint filter dropdown:
    - Multi-select: Active Sprint, Sprint 23, Sprint 24, Backlog
    - When filtered: Hide non-selected sprint columns
    - Show badge on filter button: "Sprints (2)"
    - Clear filter shows all sprints again

## Phase 9: Zoom Controls

22. Implement zoom levels (changes column width):
    - Zoom levels: 0.75x (compact), 1x (default), 1.25x (spacious)
    - Zoom out (0.75x): Sprint columns = 240px, more sprints visible
    - Default (1x): Sprint columns = 280px
    - Zoom in (1.25x): Sprint columns = 320px, fewer sprints but more card detail

23. Zoom controls UI:
    - Buttons in header right side: [-] [100%] [+]
    - Percentage button shows current zoom (clickable to reset to 100%)
    - Zoom affects column width but not card content (cards always readable)
    - Smooth transition on zoom change (200ms)

## Phase 10: Responsive & Accessibility

24. Responsive breakpoints (Timeline-specific):
    - **Mobile (<768px):** Show warning banner "Timeline view not optimized for mobile. Switch to Kanban view." Disable Timeline view or show single sprint at a time with left/right navigation
    - **Tablet (768-1023px):** Show 2-3 sprint columns, Planning Mode panel collapses to bottom drawer
    - **Desktop (1024px+):** Full Timeline with Planning Mode sidebar

25. Keyboard navigation (Timeline-specific):
    - Tab: Navigate through sprint columns (left to right)
    - Arrow keys: Move focus between cards within sprint
    - M: Toggle Planning Mode
    - 1-9: Jump to sprint by number (1 = backlog, 2 = first sprint, etc.)
    - Ctrl + Shift + Arrow: Move selected card(s) to adjacent sprint

26. Accessibility:
    - Sprint columns have semantic landmarks: `<section aria-label="Sprint 22 - Active">`
    - Capacity bars have ARIA labels: "Sprint 22 capacity: 32 of 40 points, 80% utilized, healthy"
    - Planning Mode stats panel: `<aside role="complementary">`
    - All drag-and-drop keyboard accessible (Space to pick, arrows to move, Space to drop)

## Phase 11: Loading & Empty States

27. Loading states:
    - Skeleton sprint columns (3 visible) with pulsing gray rectangles
    - Skeleton capacity bars (animated gradient shimmer)

28. Empty states:
    - **Empty sprint:** Show dashed border drop zone + "Drag cards here to plan Sprint 23" message
    - **Empty backlog:** "All cards assigned! Create new cards or move cards back to backlog."
    - **No sprints defined:** Show centered empty state: "No sprints created yet. Create your first sprint in Board Settings." + CTA button

29. Completed sprint collapsed state:
    - By default, completed sprints show header only (collapsed)
    - Click header to expand and see cards (toggle animation 200ms)
    - Show summary in collapsed state: "Sprint 21 • Completed Oct 14 • 38/40 pts • 12 cards"

---

# CODE EXAMPLES, DATA STRUCTURES & CONSTRAINTS

## Sprint Column Component Structure

```tsx
// components/timeline/sprint-column.tsx
import { Sprint, SprintStats } from '@/types/timeline';
import { Card } from '@/types/board';
import { useDroppable } from '@dnd-kit/core';

interface SprintColumnProps {
  sprint: Sprint;
  stats: SprintStats;
  cards: Card[];
  onCardDrop: (cardId: string, sprintId: string) => void;
}

export function SprintColumn({ sprint, stats, cards }: SprintColumnProps) {
  const { setNodeRef, isOver } = useDroppable({ id: sprint.id });

  const capacityColor =
    stats.utilizationPercent > 100 ? 'bg-error' :
    stats.utilizationPercent > 80 ? 'bg-warning' :
    'bg-success';

  const capacityPercent = Math.min(stats.utilizationPercent, 100);

  return (
    <div
      ref={setNodeRef}
      className={`
        flex-shrink-0 w-[280px] bg-neutral-50 rounded-lg border
        ${sprint.status === 'active' ? 'border-t-4 border-t-success' : 'border-neutral-200'}
        ${isOver ? 'border-primary border-2 border-dashed' : ''}
      `}
    >
      {/* Header */}
      <div className="p-3 border-b border-neutral-200">
        <div className="flex items-center justify-between mb-2">
          <h3 className="font-semibold text-sm">{sprint.name}</h3>
          {sprint.status === 'active' && (
            <span className="text-xs bg-success text-white px-2 py-1 rounded-full animate-pulse">
              Active • {sprint.daysRemaining}d left
            </span>
          )}
        </div>

        <p className="text-xs text-secondary mb-2">
          {formatDateRange(sprint.startDate, sprint.endDate)}
        </p>

        {/* Capacity Bar */}
        <div className="mb-2">
          <div className="flex justify-between text-xs text-secondary mb-1">
            <span>{stats.totalPoints} / {sprint.capacity} pts</span>
            <span>{stats.utilizationPercent}%</span>
          </div>
          <div className="h-2 bg-neutral-200 rounded-full overflow-hidden">
            <div
              className={`h-full ${capacityColor} transition-all duration-300`}
              style={{ width: `${capacityPercent}%` }}
            />
          </div>
        </div>

        {stats.overloaded && (
          <div className="flex items-center gap-1 text-error text-xs">
            <AlertTriangle className="w-3 h-3" />
            <span>Sprint overloaded</span>
          </div>
        )}
      </div>

      {/* Card List */}
      <div className="p-3 space-y-3 max-h-[600px] overflow-y-auto">
        {cards.map((card) => (
          <Card key={card.id} card={card} />
        ))}
        {cards.length === 0 && (
          <div className="text-center py-8 text-secondary text-sm border-2 border-dashed border-neutral-200 rounded">
            Drag cards here
          </div>
        )}
      </div>

      {/* Footer */}
      <div className="p-3 border-t border-neutral-200 flex justify-between items-center">
        <span className="text-xs text-secondary">{cards.length} cards</span>
        <button className="text-primary text-xs hover:underline">+ Add card</button>
      </div>
    </div>
  );
}
```

## Design Constraints - DO NOT DEVIATE

- **Sprint Column Width:** 280px default, 240px in Planning Mode, adjustable with zoom (240px/280px/320px)
- **Backlog Width:** 320px default, 360px in Planning Mode
- **Capacity Bar Height:** 8px (thin horizontal bar)
- **Color Coding:** Green (0-80%), Yellow (80-100%), Red (>100%) - MUST follow these thresholds
- **Planning Stats Panel:** 280px width, left side, only visible in Planning Mode
- **Column Gaps:** 16px between sprint columns
- **Capacity Calculation:** Sum of card.storyPoints in sprint / sprint.capacity * 100
- **Active Sprint Indicator:** 4px top border in success green + pulsing badge
- **Completed Sprint:** Gray background, collapsed by default

## DO NOT Include These Features (Out of Scope)

- ❌ Sprint creation/editing (handled in Board Settings, not Timeline view)
- ❌ Burndown charts or velocity graphs
- ❌ Time tracking or logged hours
- ❌ Resource allocation algorithms (auto-assign cards)
- ❌ Export to CSV/Excel
- ❌ Print view
- ❌ Calendar integration

---

# STRICT SCOPE DEFINITION

## What You SHOULD Create (In Scope)

✅ **Files to Create:**
1. `components/timeline/timeline-view.tsx` - Main Timeline container
2. `components/timeline/timeline-header.tsx` - Header with Planning Mode toggle
3. `components/timeline/sprint-column.tsx` - Individual sprint column with capacity bar
4. `components/timeline/backlog-column.tsx` - Special backlog column (wider, sticky in Planning Mode)
5. `components/timeline/planning-stats-panel.tsx` - Left sidebar with sprint overview
6. `components/timeline/capacity-bar.tsx` - Reusable capacity visualization component
7. `lib/mock-timeline-data.ts` - Sample sprint + timeline data
8. `types/timeline.ts` - Sprint, Timeline, SprintStats interfaces

✅ **Functionality to Implement:**
- Horizontal scrollable sprint columns (left-to-right chronological)
- Visual capacity indicators (color-coded progress bars)
- Planning Mode toggle (shows stats panel, adjusts column widths)
- Drag-and-drop cards between sprints and backlog
- Real-time capacity updates (optimistic UI)
- Multi-select bulk sprint assignment
- Overload warnings (modal confirmation)
- Zoom controls (3 levels)
- Keyboard navigation (sprint jumping, card movement)
- Responsive layout (tablet/desktop, mobile warning)
- Empty states (empty sprint, empty backlog, no sprints)
- Completed sprint collapsing

## What You MUST NOT Modify (Out of Scope)

❌ Same restrictions as Kanban Board prompt (no auth, no API, no backend)

---

# VISUAL STYLE GUIDANCE

## Timeline-Specific Design Patterns

**Horizontal Metaphor:**
- Time flows left → right (past to future)
- Backlog on far left (unplanned = before timeline)
- Completed sprints progressively grayed out
- Active sprint visually emphasized (green border, pulsing badge)
- Future sprints neutral styling

**Capacity Visualization:**
- Color signals health at a glance (managers should see red immediately)
- Consistent color thresholds across all views (80% = yellow threshold)
- Animate capacity bar changes (smooth fill transition, not jumpy)
- Show both absolute (32/40 pts) and relative (80%) numbers

**Planning Mode Optimization:**
- Compress sprint columns to show MORE sprints on screen (240px vs 280px)
- Expand backlog to show MORE unassigned cards (360px vs 320px)
- Stats panel provides quick navigation (click sprint in panel → scroll to sprint)

---

# FINAL REMINDERS

## Testing Your Implementation

**Manual Test Checklist:**
1. Drag card from Backlog to Sprint 22 (capacity bar should update in real-time)
2. Drag card to overloaded sprint (warning modal should appear)
3. Toggle Planning Mode ON (stats panel appears, columns resize smoothly)
4. Click sprint in stats panel (timeline should scroll to that sprint)
5. Multi-select 5 cards, bulk assign to Sprint 23 (should animate staggered)
6. Use zoom controls (columns should resize, content readable at all levels)
7. Collapse/expand completed sprint (should animate smoothly)
8. Filter by assignee (cards should highlight across all sprints)
9. Keyboard: Press 'M' (Planning Mode should toggle)
10. Keyboard: Press '3' (should jump to Sprint 22 - third column after backlog)

**Capacity Calculation Verification:**
- Sprint with 40pt capacity, cards totaling 32pts → 80% (yellow)
- Sprint with 40pt capacity, cards totaling 45pts → 112% (red + overloaded badge)
- Sprint with 40pt capacity, cards totaling 20pts → 50% (green)

---

## END OF PROMPT

Copy the entire prompt above and paste it into Lovable or V0.
```

🚀 PROMPT END
